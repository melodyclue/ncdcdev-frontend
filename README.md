## 実行方法

### 環境構築
```bash
# 依存関係のインストール
pnpm install

# 開発サーバーの起動
pnpm dev
```

### テスト実行
```bash
pnpm test
```

### ビルド
```bash
pnpm build
```

## 実装方針

### 技術選択
- **Next.js 15 + React 19**
- **TypeScript**
- **Tailwind CSS**
- **@tanstack/react-form**
- **Zod**
- **Vitest + Testing Library**

### 実装方針
まず、要件とデザインを見ながらどんな機能があるか、どのようにデザインされているかを確認。
この時点で、CMSの管理画面をイメージした。

次にデザインはある程度反映しつつ、CRUDを実装し、きちんと動作するかを確認した。
その後、本格的に、デザインカンプを見ながら、デザインを反映した。
ボタンを共通化できそうと考えたので、コンポーネントとして共通化した。

一通り実装できたら、トーストやエラーハンドリングのチェック、レスポンシブ対応、テストコードの生成を行った。
デザインカンプとの差分については適宜調整した。


### 設計思想

#### ディレクトリ構成について
`src/features`ディレクトリ配下に、サイドバーとメイン（コンテンツ部分）を分けた。
その中で主にフォームを実装した。


#### コンポーネントについて
コンポーネントは`src/components`ディレクトリ配下に、共通で使い回すコンポーネントをまとめた。
特に編集やキャンセルなどのボタンについては、デザインが共通しているので、`button.tsx`として`class-variance-authority`を用いて`variants`や`size`,`icon`, `text`を定義し、共通化した。


#### ページについて
layoutの中でSidebarとメイン部分に分けた。ページ詳細は`src/app/contents/[contentId]/page.tsx`で実装した。


#### フォームについて
フォームは`@tanstack/react-form`を用いて実装した。

以下のように`Subscribe`を用いて、フォームの状態を監視し、ボタンのdisabledを制御した。
再レンダリングはchildrenの中のみ行われるので、パフォーマンスの最適化という点でこのライブラリを採用した。

```tsx
<form.Subscribe
	selector={(state) => [state.isSubmitting]}
	children={([isSubmitting]) => (
    ...
```


#### Data Fetchについて
Next.jsの`fetch`を用いて、データ取得を行なった。

mutationについては、データ更新・削除・編集後に`next/cache`の`revalidatePath`や`revalidateTag`を用いて、データの再取得を行なった。また`sonner`を使ってトーストとしてユーザーにフィードバックを与えた。


#### テストについて
入力フォームはユーザーが最も触れる部分なので、バリデーションが仕様通りに動作するかに注目したテストを書くべきだと考えた。
Claude Codeを用いて、titleとbodyの２つについて、テストコードを生成した。

バリデーションに合わせたテストコードが生成されることは予想されたが、対話の中で、境界値テストも重要だという指摘を受けたため、最終的には境界値テストも含めたテストコードを生成した。

#### 使用したAIツールについて
Cursorによるコード補完、Claude Codeによるコード生成（レスポンシブやレイアウト調整など）、テストコード生成、コードレビューを行った。

#### 将来的な改善点
- サイドバーでのページの削除時に、モーダルを表示して、削除の確認を行う
- サイドバーでの新しいページの追加時に、モーダルを表示して、タイトルを入力させ、そのタイトルでページを作成する
